{% extends "main.html" %}
{% load static %}
{% block main %}

<div class="row mt-4">
  <div class="col">
    <h2 class="text-left">Notificaciones</h2>
  </div>
  <div class="col">
    <a href="{% url 'neymatex:notificacion:agregar' %}" class="btn btn-primary float-right">Enviar nueva <i
        class="fas fa-plus-circle"> </i></a>
  </div>
  <hr>
</div>
<div class="row mt-4">
  <div class="col-12 table-container">
    <table class="table table-responsive-md table-hover text-center" id="tabla-clientes">
      <thead class="thead-light">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Título</th>
          <th scope="col">Enviado a</th>
          <th scope="col">Fecha de envío</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% if notificaciones %}
        {% for notificacion in notificaciones %}
        <tr class="text-center">
          <td scope="row">{{forloop.counter}}</td>
          <td>{{notificacion.title}}</td>
          <td>
            {% if notificacion.grupo_usuarios %}
            {% for grupo in notificacion.grupo_usuarios.all %}
            {{grupo}}<br>
            {% endfor %}
            {% endif %}
          </td>
          <td>{{notificacion.created_at}}</td>
          <td>
            <a data-toggle='modal' data-target="#mainModal"
              data-url="{% url 'neymatex:notificacion:reenviar' notificacion.pk %}" href="#"
              class="btn btn-sm btn-primary use-modal btn-action" title="Reenviar"><i class="fas fa-edit"></i></a>
          </td>
        </tr>
        {% endfor %}
        {% endif %}
      </tbody>
    </table>
    <div class="pagination text-center">
    </div>
  </div>
</div>
{% endblock main %}

{% block specific_scripts %}
<script src="{% static 'js/DTable.js' %}"></script>
<script src="{% static 'js/utilsModal.js' %}"></script>
<script>
  $(document).ready(init_pagination({{page_obj.paginator.num_pages}}, {{page_obj.number}}))
</script>
{% endblock %}
